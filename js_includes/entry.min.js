$(document).ready(function(){if(action=="add"){$("#sweetnessLambic").hide();$("#carbLambic").hide();$("#special").hide();$("#optional").hide();$("#darkLightColor").hide();$("#strengthIPA").hide();$("#strengthSaison").hide();$("#BDGColor").hide();$("#carbonation").hide();$("#sweetness-mead").hide();$("#sweetness-cider").hide();$("#strength").hide();$("#req-special").hide();$("#req-carbonation").hide();$("#req-sweetness").hide();$("#req-strength").hide();$("#specialInfo").hide();$("#possible-allergens").hide();$("#regionalVariation").hide();$("#cider-gravity").hide();$("#brewABV-label-icon").hide()}function disp_special_ing(style,style_set){$("#req-special").show();if(style_set=="NWCiderCup"){if(section=="brew"){$("#brewABV-label").removeClass("text-teal");$("#brewABV-label").addClass("text-teal")}if(section=="admin"){$("#brewABV-label").removeClass("text-warning");$("#brewABV-label").addClass("text-warning")}$("#brewABV-label-icon").show();$("input[name='brewSweetnessLevel']").prop("required",false);$("input[name='brewOriginalGravity']").prop("required",false);$("input[name='brewFinalGravity']").prop("required",false);$("input[name='brewABV']").prop("required",true)}else if(style_set=="BJCP2025"){if(style=="2-A"){$("#special").hide();$("#req-special").hide();$("#brewInfo").prop("required",false);$("#regionalVariation").fadeIn()}else if((style=="9-A")||(style=="10-C")){$("#darkLightColor").fadeIn();$("input[name='darkLightColor']").prop("required",true)}else if((style=="21-B")||(style=="21-B1")||(style=="21-B2")||(style=="21-B3")||(style=="21-B4")||(style=="21-B5")||(style=="21-B6")||(style=="21-B7")){if(style=="21-B"){$("#special").show()}$("#strengthIPA").fadeIn();$("input[name='strengthIPA']").prop("required",true)}else if(style=="23-F"){$("#sweetnessLambic").fadeIn();$("input[name='sweetnessLambic']").prop("required",true);$("#carbLambic").fadeIn();$("input[name='carbLambic']").prop("required",true);$("#special").fadeIn();$("#brewInfo").prop("required",true)}else if(style=="24-C"){$("#BDGColor").fadeIn();$("input[name='BDGColor']").prop("required",true)}else if(style=="25-B"){$("#darkLightColor").fadeIn();$("#strengthSaison").fadeIn();$("input[name='darkLightColor']").prop("required",true);$("input[name='strengthSaison']").prop("required",true)}else if(style=="C2-C"){$("#cider-gravity").fadeIn();if(section=="brew"){$("#brewABV-label").removeClass("text-teal");$("#brewABV-label").addClass("text-teal")}if(section=="admin"){$("#brewABV-label").removeClass("text-warning");$("#brewABV-label").addClass("text-warning")}$("#brewABV-label-icon").show();$("input[name='brewOriginalGravity']").prop("required",true);$("input[name='brewFinalGravity']").prop("required",true);$("input[name='brewABV']").prop("required",true)}else if(style=="C2-D"){$("#cider-gravity").fadeIn();if(section=="brew"){$("#brewABV-label").removeClass("text-teal");$("#brewABV-label").addClass("text-teal")}if(section=="admin"){$("#brewABV-label").removeClass("text-warning");$("#brewABV-label").addClass("text-warning")}$("#brewABV-label-icon").show();$("input[name='brewOriginalGravity']").prop("required",true);$("input[name='brewFinalGravity']").prop("required",true);$("input[name='brewABV']").prop("required",true)}else if(style=="C4-C"){$("#cider-gravity").fadeIn();if(section=="brew"){$("#brewABV-label").removeClass("text-teal");$("#brewABV-label").addClass("text-teal")}if(section=="admin"){$("#brewABV-label").removeClass("text-warning");$("#brewABV-label").addClass("text-warning")}$("#brewABV-label-icon").show();$("input[name='brewOriginalGravity']").prop("required",true);$("input[name='brewFinalGravity']").prop("required",true);$("input[name='brewABV']").prop("required",true)}else{$("#special").fadeIn("fast");$("#brewInfo").prop("required",true)}}else if(style_set=="BJCP2021"){if(style=="2-A"){$("#special").hide();$("#regionalVariation").fadeIn();$("#brewInfo").prop("required",false)}else if((style=="9-A")||(style=="10-C")){$("#darkLightColor").fadeIn();$("input[name='darkLightColor']").prop("required",true)}else if((style=="21-B")||(style=="21-B1")||(style=="21-B2")||(style=="21-B3")||(style=="21-B4")||(style=="21-B5")||(style=="21-B6")||(style=="21-B7")){if(style=="21-B"){$("#special").show()}$("#strengthIPA").fadeIn();$("input[name='strengthIPA']").prop("required",true)}else if(style=="23-F"){$("#special").show();$("#sweetnessLambic").fadeIn();$("input[name='sweetnessLambic']").prop("required",true);$("#carbLambic").fadeIn();$("input[name='carbLambic']").prop("required",true);$("#special").fadeIn();$("#brewInfo").prop("required",true)}else if(style=="24-C"){$("#special").show();$("#BDGColor").fadeIn();$("input[name='BDGColor']").prop("required",true)}else if(style=="25-B"){$("#special").show();$("#darkLightColor").fadeIn();$("#strengthSaison").fadeIn();$("input[name='darkLightColor']").prop("required",true);$("input[name='strengthSaison']").prop("required",true)}else{$("#special").show();$("#brewInfo").prop("required",true)}}else{$("#special").show();$("#brewInfo").prop("required",true)}}function disp_strength(style,style_set){$("#strength").fadeIn();$("input[name='brewMead3']").prop("required",true);$("#req-strength").fadeIn()}function disp_sweetness(style,style_set){if((style.startsWith("C"))||($.inArray(style,cider_sweetness_custom_styles)>-1)){$("#sweetness-cider").fadeIn();$("input[name='brewMead2-cider']").prop("required",true)}if((style.startsWith("M"))||($.inArray(style,mead_sweetness_custom_styles)>-1)){$("#sweetness-mead").fadeIn();$("input[name='brewMead2-mead']").prop("required",true)}$("#req-sweetness").fadeIn()}function disp_carbonation(style,style_set){$("#carbonation").fadeIn();$("input[name='brewMead1']").prop("required",true);$("#req-carbonation").fadeIn()}function disp_optional(style,style_set){$("#optional").fadeIn()}function reset_element_states(choose_new_style){$("#sweetnessLambic").hide();$("#carbLambic").hide();$("#special").hide();$("#optional").hide();$("#darkLightColor").hide();$("#strengthIPA").hide();$("#strengthSaison").hide();$("#BDGColor").hide();$("#carbonation").hide();$("#sweetness-mead").hide();$("#sweetness-cider").hide();$("#strength").hide();$("#req-special").hide();$("#req-carbonation").hide();$("#req-sweetness").hide();$("#req-strength").hide();$("#specialInfo").hide();$("#possible-allergens").hide();$("#regionalVariation").hide();$("#cider-gravity").hide();$("#brewInfo").prop("required",false);$("#brewInfoOptional").prop("required",false);$("input[name='regionalVar']").prop("required",false);$("input[name='darkLightColor']").prop("required",false);$("input[name='strengthIPA']").prop("required",false);$("input[name='sweetnessLambic']").prop("required",false);$("input[name='carbLambic']").prop("required",false);$("input[name='BDGColor']").prop("required",false);$("input[name='strengthSaison']").prop("required",false);$("input[name='brewMead1']").prop("required",false);$("input[name='brewMead2-cider']").prop("required",false);$("input[name='brewMead2-mead']").prop("required",false);$("input[name='brewMead3']").prop("required",false);$("#brewABV-label").removeClass("text-teal");$("#brewABV-label").removeClass("text-warning");$("#brewABV-label-icon").hide();$("input[name='brewABV']").prop("required",false);$("input[name='brewOriginalGravity']").prop("required",false);$("input[name='brewFinalGravity']").prop("required",false);if(choose_new_style==1){$("#brewInfo").val("");$("#brewInfoOptional").val("");$("#brewComments").val("");$("#regionalVar").val("");$("input[name='brewPossAllergens']").prop("required",false);$("input[name='brewPossAllergens']").val("");$("input[name='strengthIPA']").removeAttr("checked");$("input[name='sweetnessLambic']").removeAttr("checked");$("input[name='carbLambic']").removeAttr("checked");$("input[name='darkLightColor']").removeAttr("checked");$("input[name='strengthSaison']").removeAttr("checked");$("input[name='BDGColor']").removeAttr("checked");$("input[name='brewMead1']").removeAttr("checked");$("input[name='brewMead2-mead']").removeAttr("checked");$("input[name='brewMead2-cider']").removeAttr("checked");$("input[name='brewMead3']").removeAttr("checked");$("input[name='possible-allergens']").removeAttr("checked");$("#possAllergens_1").prop("checked",true);$("#brewPouringInst-Normal").prop("checked",true);$("#brewPouringRouse-No").prop("checked",true);$("#brewPouringNotes").val("");$("#brewABV").val("");$("input[name='brewOriginalGravity']").val("");$("input[name='brewFinalGravity']").val("")}}function disp_req_modal(style,style_set){let style_exists=style in req_special_ing_style_info;if(style_exists){var special_modal_id="#modal-"+style;var special_modal_link="<a href='#' title='Select for specifics for this style.' data-bs-toggle='modal' data-bs-target='"+special_modal_id+"'>"+label_this_style+"</a>";var special_info_text=req_special_ing_style_info[style];$("#specialInfo").fadeIn();$("#specialInfoName").html(special_modal_link);$("#specialInfoText").html(special_info_text)}}function require_visible(){if($("#special").is(":visible")){$("#brewInfo").prop("required",true)}if($("#strengthIPA").is(":visible")){$("input[name='strengthIPA']").prop("required",true)}if($("#sweetnessLambic").is(":visible")){$("input[name='sweetnessLambic']").prop("required",true)}if($("#carbLambic").is(":visible")){$("input[name='carbLambic']").prop("required",true)}if($("#darkLightColor").is(":visible")){$("input[name='darkLightColor']").prop("required",true)}if($("#strengthSaison").is(":visible")){$("input[name='strengthSaison']").prop("required",true)}if($("#BDGColor").is(":visible")){$("input[name='BDGColor']").prop("required",true)}if($("#strength").is(":visible")){$("input[name='brewMead3']").prop("required",true)}if($("#carbonation").is(":visible")){$("input[name='brewMead1']").prop("required",true)}if($("#sweetness-mead").is(":visible")){$("input[name='brewMead2-mead']").prop("required",true)}if($("#sweetness-cider").is(":visible")){$("input[name='brewMead2-cider']").prop("required",true)}}$(document).ready(function(){function calculateABV(){var og=parseFloat($('#og').val());var fg=parseFloat($('#fg').val());if(isNaN(og)||isNaN(fg)){return}var abv=(og-fg)*131.25;$('#brewABV').prop("value",abv.toFixed(1))}function validateInput(value){return/^\d\.\d{3}$/.test(value)}$('#og, #fg').on('input',function(){var ogValid=validateInput($('#og').val());var fgValid=validateInput($('#fg').val());if(ogValid&&fgValid){calculateABV()}if(!ogValid){$('#og-feedback').show();$('#og-feedback').text(ogfgFeedback)}else{$('#og-feedback').hide();$('#og-feedback').text('')}if(!fgValid){$('#fg-feedback').show();$('#fg-feedback').text(ogfgFeedback)}else{$('#fg-feedback').hide();$('#fg-feedback').text('')}})});$("#specify-pouring").hide();$("#brewInfo").keyup(function(){var cs=$(this).val().length;$('#countInfo').text(cs)});$("#brewInfo").keydown(function(){var cs=$(this).val().length;$('#countInfo').text(cs)});$("#brewInfoOptional").keyup(function(){var cs=$(this).val().length;$('#countInfoOptional').text(cs)});$("#brewInfoOptional").keydown(function(){var cs=$(this).val().length;$('#countInfoOptional').text(cs)});$("#brewComments").keyup(function(){var cs=$(this).val().length;$('#countComments').text(cs)});$("#brewComments").keydown(function(){var cs=$(this).val().length;$('#countComments').text(cs)});$("#possible-allergens").hide();$("input[name$='possible-allergens']").click(function(){if($(this).val()=="1"){$("#possible-allergens").fadeIn();$("input[name='brewPossAllergens']").prop("required",true)}else{$("#possible-allergens").hide();$("input[name='brewPossAllergens']").prop("required",false);$("input[name='brewPossAllergens']").val("")}});if(edit_style!="default"){reset_element_states(0);var special_ing=$.inArray(edit_style,req_special_ing_styles);var strength=$.inArray(edit_style,req_strength_styles);var sweetness=$.inArray(edit_style,req_sweetness_styles);var carbonation=$.inArray(edit_style,req_carb_styles);var optional=$.inArray(edit_style,optional_info_styles);var pouring=$.inArray(edit_style,req_pouring);if(possible_allergens==null){$("#possible-allergens").hide();$("#possAllergens_0").prop("checked",false);$("#possAllergens_1").prop("checked",true)}else{$("#possible-allergens").fadeIn();$("#possAllergens_0").prop("checked",true)}if(special_ing>-1){disp_special_ing(edit_style,style_set);disp_req_modal(edit_style,style_set)}if(strength>-1){disp_strength(edit_style,style_set);disp_req_modal(edit_style,style_set)}if(carbonation>-1){disp_carbonation(edit_style,style_set);disp_req_modal(edit_style,style_set)}if(sweetness>-1){disp_sweetness(edit_style,style_set);disp_req_modal(edit_style,style_set)}if(optional>-1){disp_optional(edit_style,style_set);disp_req_modal(edit_style,style_set)}if(pouring>-1){$("#specify-pouring").fadeIn()}else{$("#specify-pouring").hide()}}$("#type").change(function(){if($(this).val()=="00-00"){reset_element_states(1);$("#form-submit-button").prop("disabled",true)}else{reset_element_states(1);var style=$('#type').val();var special_ing=$.inArray(style,req_special_ing_styles);var strength=$.inArray(style,req_strength_styles);var sweetness=$.inArray(style,req_sweetness_styles);var carbonation=$.inArray(style,req_carb_styles);var optional=$.inArray(style,optional_info_styles);var pouring=$.inArray(style,req_pouring);if(special_ing>-1){disp_special_ing(style,style_set);disp_req_modal(style,style_set)}if(strength>-1){disp_strength(style,style_set);disp_req_modal(style,style_set)}if(carbonation>-1){disp_carbonation(style,style_set);disp_req_modal(style,style_set)}if(sweetness>-1){disp_sweetness(style,style_set);disp_req_modal(style,style_set)}if(optional>-1){disp_optional(style,style_set)}if(pouring>-1){$("#specify-pouring").fadeIn()}else{$("#specify-pouring").fadeOut()}}})});