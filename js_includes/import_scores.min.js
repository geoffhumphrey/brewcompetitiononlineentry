function import_scores(base_url,ajax_url,section){$("#score-entered-status-default").show();$("#score-import-status").hide();jQuery.ajax({url:ajax_url+"import_scores.ajax.php",success:function(data){var jsonData=JSON.parse(data);if(jsonData.status==="0"){$("#import-scores-status").html("No evaluations have been recorded yet.");$("#import-scores-status-div").attr("class","alert alert-purple");$("#import-scores-status-icon").attr("class","fa fa-asterisk fa-xs text-purple");$("#import-scores-status").attr("class","text-purple small")}else if(jsonData.status==="1"){var imported_count=jsonData.scores_imported_count;var not_imported_count=jsonData.scores_not_imported_count;var flagged_count=jsonData.flagged_count;var scored_places_discrepency_count=jsonData.scored_places_discrepency_count;var scored_places_discrepency=jsonData.scored_places_discrepency;let import_status="";if((section=="evaluation")||(go=="judging_scores")){import_status+="<h4>Import Summary</h4>"}if(imported_count==1){import_status+="<p>Scores and/or places for <strong class=\"text-success\">"+imported_count+" entry</strong> have been imported and/or its place awarded has been updated and is now officially accepted.</strong></p>"}if(imported_count>1){import_status+="<p>Scores and/or places for <strong class=\"text-success\">"+imported_count+" entries</strong> have been imported and/or their places awarded have been updated and are now officially accepted.</strong></p>"}if(not_imported_count==1){if((section=="evaluation")||(go=="judging_scores")){import_status+="<p>"}if(section=="evaluation"){import_status+="Scores and/or places for <strong class=\"text-danger\">"+not_imported_count+" entries</strong> were <strong>not imported</strong> because, at this time, only a single judge evaluation exists in the database for each of those entries.</strong>";import_status+=" Check the notes column for each table below to see the number of evaluations submitted per entry."}else{import_status+="The score for <strong class=\"text-danger\">"+not_imported_count+" entry</strong> was <strong>not imported</strong> imported because, at this time, <a href=\""+base_url+"/index.php?section=evaluation&amp;go=default&amp;filter=default&amp;view=admin\">only a single judge evaluation exists in the database</a> for that entry.</strong></p>"}if((section=="evaluation")||(go=="judging_scores")){import_status+="</p>"}}if(not_imported_count>1){if((section=="evaluation")||(go=="judging_scores")){import_status+="<p>"}if(section=="evaluation"){import_status+="Scores and/or places for <strong class=\"text-danger\">"+not_imported_count+" entries</strong> were <strong>not imported</strong> because, at this time, only a single judge evaluation exists in the database for each of those entries.</strong>";import_status+=" Check the notes column for each table below to see the number of evaluations submitted per entry."}else{import_status+="Scores and/or places for <strong class=\"text-danger\">"+not_imported_count+" entries</strong> were <strong>not imported</strong> because, at this time, <a href=\""+base_url+"/index.php?section=evaluation&amp;go=default&amp;filter=default&amp;view=admin\">only a single judge evaluation exists in the database</a> for each of those entries.</strong>"}if((section=="evaluation")||(go=="judging_scores")){import_status+="</p>"}}if((flagged_count>0)||(imported_count>0)){if((section=="evaluation")||(go=="judging_scores")){import_status+="<p>"}if(imported_count>0){if(go=="judging_scores"){import_status+="<a href=\""+base_url+"index.php?section=admin&amp;go=judging_scores\">Refresh</a> to view all imported scores and places."}else{import_status+="<a href=\""+base_url+"index.php?section=admin&amp;go=judging_scores\">View all imported scores and places</a>."}}if(flagged_count>0){if(flagged_count==1){import_status+=" <strong>Please note: <span class=\"text-danger\">"+flagged_count+" entry</span></strong> with consensus scores entered by judges that <strong>did not match</strong> was not imported."}if(flagged_count>1){import_status+=" <strong>Please note: <span class=\"text-danger\">"+flagged_count+" entries</span></strong> with consensus scores entered by judges that <strong>did not match</strong> were not imported. Please check the entries, reconcile the differences, and re-import."}if(section=="evaluation"){import_status+=" Refresh this page to see the flagged entries."}}if((section=="evaluation")||(go=="judging_scores")){import_status+="</p>"}}let import_status_discrepency="";if((scored_places_discrepency)&&(scored_places_discrepency_count>0)){scored_places_discrepency=scored_places_discrepency.split(",");if((section=="evaluation")||(go=="judging_scores")){import_status_discrepency+="<p>"}if(scored_places_discrepency_count==1){import_status_discrepency+=" <strong class=\"text-danger\">"+scored_places_discrepency_count+" entry's</strong> chosen medal place  <strong>did not match</strong> what was already in the scores database and <strong>was not imported</strong>."}if(scored_places_discrepency_count>1){import_status_discrepency+=" <strong class=\"text-danger\">"+scored_places_discrepency_count+" entries'</strong> chosen medal places <strong>did not match</strong> what was already in the scores database and <strong>were not imported</strong>."}if(section=="evaluation"){import_status_discrepency+=" Check the entries detailed in the table below for accuracy."}if((section=="evaluation")||(go=="judging_scores")){import_status_discrepency+="</p>"}import_status_discrepency+="<div id=\"discrepency-table\" class=\"row\">";import_status_discrepency+="<div class=\"col col-xs-12 col-sm-12 col-md-12 col-lg-8\">";import_status_discrepency+="<table style=\"background-color: #ededed;\" class=\"table table-bordered table-striped table-hover\">";import_status_discrepency+="<thead>";import_status_discrepency+="<tr>";import_status_discrepency+="<th width=\"33%\">Number</th>";if((section=="admin")&&(go=="judging_scores")){import_status_discrepency+="<th width=\"33%\">Place - Admin: Scores</th>"}else{import_status_discrepency+="<th width=\"33%\">Place - <a href=\""+base_url+"index.php?section=admin&amp;go=judging_scores\">Admin: Scores</a></th>"}if(section=="evaluation"){import_status_discrepency+="<th>Place - Admin: Entry Evaluations</th>"}else{import_status_discrepency+="<th>Place - <a href=\""+base_url+"index.php?section=evaluation&amp;go=default&amp;filter=default&amp;view=admin\">Admin: Entry Evaluations</a></th>"}import_status_discrepency+="</tr>";import_status_discrepency+="</thead>";import_status_discrepency+="<tbody>";scored_places_discrepency.forEach((discrepency,index)=>{discrepency=discrepency.replace("|","</td><td>");discrepency=discrepency.replace("|","</td><td>");discrepency=discrepency.replace("<td>5</td>","<td>HM</td>");import_status_discrepency+="<tr>";import_status_discrepency+="<td>"+discrepency+"</td>";import_status_discrepency+="</tr>"});import_status_discrepency+="</tbody>";import_status_discrepency+="</table>";import_status_discrepency+="</div>"}if((imported_count>0)||(scored_places_discrepency_count>0)){if(imported_count==0){var imported_status="";$("#import-scores-status-div").hide();$("#import-scores-status-dashboard").hide()}else{$("#import-scores-status-dashboard").show();$("#import-scores-status-div").attr("class","alert alert-forest-green");$("#import-scores-status-icon").attr("class","fa fa-check-circle text-forest-green");$("#import-scores-status").html("Successfully imported "+imported_count+" scores and/or places.");$("#import-scores-status").attr("class","text-forest-green small")}if(scored_places_discrepency_count>0){import_status+=import_status_discrepency;$("#import-status-discrepency-dashboard").show();$("#import-status-discrepency-icon").attr("class","fa fa-info-circle text-primary");$("#import-status-discrepency").html(import_status);$("#import-status-discrepency").attr("class","text-primary small");if((section=="admin")&&(go=="default")){$("#discrepency-table").hide()}}$("#score-entered-status-default").hide();$("#score-import-status").html(import_status);$("#score-import-status").show("fast")}else{$("#score-import-status").hide();$("#import-scores-status").html("There are no updates to make and/or no scores/places to import that meet the minimum criteria (at least two evaluations recorded).");$("#import-scores-status-div").attr("class","alert alert-purple");$("#import-scores-status-icon").attr("class","fa fa-asterisk text-purple");$("#import-scores-status").attr("class","text-purple small")}$("#no-scores-entered").hide();$("#import-scores").removeAttr('href')}else if(jsonData.status==="2"){$("#score-import-status").hide();$("#import-scores-status").html("There was a problem. Please try again.");$("#import-scores-status-div").attr("class","alert alert-warning");$("#import-scores-status-icon").attr("class","fa fa-exclamation-circle text-warning");$("#import-scores-status").attr("class","text-warning small")}else{$("#score-import-status").hide();$("#import-scores-status").html("There was an error.");$("#import-scores-status-div").attr("class","alert alert-danger");$("#import-scores-status-icon").attr("class","fa fa-times-circle text-danger");$("#import-scores-status").attr("class","text-danger small")}},error:function(){console.log('Error')}})}$(document).ready(function(){$("#score-import-status").hide();$("#import-scores-status-div").hide();$("#import-scores").click(function(){$("#score-import-status").hide();$("#import-scores-status-div").show();$("#import-scores-status").html("Loading...");$("#import-scores-status-div").attr("class","alert alert-grey");$("#import-scores-status-icon").attr("class","fa fa-cog fa-spin text-grey");$("#import-scores-status").attr("class","text-grey small");import_scores(base_url,ajax_url,section)})});