$("#alert-update-button-enabled").hide();function generic_success(element_id,remove,msg){$("#"+element_id+"-status").attr("class","fa fa-lg fa-check text-success");$("#"+element_id+"-status-msg").html(msg);$("#"+element_id+"-status-msg").attr("class","text-success small");if(remove==0){$("#"+element_id+"-status").show();$("#"+element_id+"-status-msg").show()}if(remove>0){$("#"+element_id+"-status").show().delay(remove).hide(100);$("#"+element_id+"-status-msg").show().delay(remove).hide(100)}}function generic_failure(element_id,remove,msg){$("#"+element_id+"-status").attr("class","fa fa-lg fa-times text-danger");$("#"+element_id+"-status-msg").html(msg);$("#"+element_id+"-status-msg").attr("class","text-danger small");if(remove==0){$("#"+element_id+"-status").show();$("#"+element_id+"-status-msg").show()}if(remove>0){$("#"+element_id+"-status").show().delay(remove).hide(100);$("#"+element_id+"-status-msg").show().delay(remove).hide(100)}}function generic_session_expired(element_id,remove,msg){$("#"+element_id+"-status").attr("class","fa fa-lg fa-exclamation-triangle text-danger");$("#"+element_id+"-status-msg").html(msg);$("#"+element_id+"-status-msg").attr("class","text-danger small");if(remove==0){$("#"+element_id+"-status").show();$("#"+element_id+"-status-msg").show()}if(remove>0){$("#"+element_id+"-status").show().delay(remove).hide(100);$("#"+element_id+"-status-msg").show().delay(remove).hide(100)}}function disable_update_button(action){$("#"+action+"-update-button-disabled").show();$("#"+action+"-update-button-enabled").hide();$("#"+action+"-submit").prop("disabled",true);$("#alert-update-button-enabled").hide()}function enable_update_button(action){$("#"+action+"-submit").prop("disabled",false);$("#"+action+"-update-button-disabled").hide();$("#"+action+"-update-button-enabled").show();$("#alert-update-button-enabled").show()}function save_failure(element_id,column,action,error){enable_update_button(action);if(error==1){$("#"+element_id+"-"+column+"-status-msg").html("Error. Invalid numerical input.")}else if(error==2){$("#"+element_id+"-"+column+"-status-msg").html("Error. Alpha characters only.")}else if(error==3){$("#"+element_id+"-"+column+"-status-msg").html("Error saving. Please try again.")}else{$("#"+element_id+"-"+column+"-status-msg").html("Error")}$("#"+element_id+"-"+column+"-status").attr("class","fa fa-lg fa-times text-danger");$("#"+element_id+"-"+column+"-status-msg").attr("class","text-danger small");$("#"+element_id+"-"+column+"-form-group").removeClass("has-error");$("#"+element_id+"-"+column+"-form-group").removeClass("has-success");$("#"+element_id+"-"+column+"-form-group").addClass("has-error");$("#"+element_id+"-"+column+"-status").show();$("#"+element_id+"-"+column+"-status-msg").show()};function save_success(element_id,column,action,error){disable_update_button(action);$("#"+element_id+"-"+column+"-status").attr("class","fa fa-lg fa-check text-success");$("#"+element_id+"-"+column+"-status-msg").html("Saved");$("#"+element_id+"-"+column+"-status-msg").attr("class","text-success small");$("#"+element_id+"-"+column+"-form-group").removeClass("has-error");$("#"+element_id+"-"+column+"-form-group").removeClass("has-success");$("#"+element_id+"-"+column+"-form-group").addClass("has-success");$("#"+element_id+"-"+column+"-status").show();$("#"+element_id+"-"+column+"-status-msg").show()};function save_success_update_value(element_id,column,value){$("#"+element_id+"-"+column+"-sortable-value").html(value)};function save_column(base_url,column,action,id,rid1,rid2,rid3,rid4,element_id,output="value"){var value=$("#"+element_id).val();$("#"+element_id+"-"+column+"-status").attr("class","fa fa-lg fa-cog fa-spin text-muted");$("#"+element_id+"-"+column+"-status-msg").html("Processing...");$("#"+element_id+"-"+column+"-status-msg").attr("class","text-muted small");$("#"+element_id+"-"+column+"-status").show();$("#"+element_id+"-"+column+"-status-msg").show();let url=base_url+"ajax/save.ajax.php?action="+action+"&go="+column+"&id="+id;if(rid1!="default"){url+="&rid1="+rid1}if(rid2!="default"){url+="&rid2="+rid2}if(rid3!="default"){url+="&rid3="+rid3}if(rid4!="default"){url+="&rid4="+rid4}var data_const=column+"="+value;jQuery.ajax({url:url,data:data_const,type:"POST",success:function(data){var jsonData=JSON.parse(data);if(jsonData.status==="0"){save_failure(element_id,column,action,jsonData.error_type)}if(jsonData.status==="1"){if(output=="html"){$("#"+element_id).html(jsonData.input)}else{$("#"+element_id).val(jsonData.input)}save_success(element_id,column,action,jsonData.error_type);save_success_update_value(element_id,column,jsonData.input)}if(jsonData.status==="9"){generic_session_expired(element_id,'0','Session expired. Sign in and try again.')}},error:function(){save_failure(element_id,column,action,"99")}})};function select_place(base_url,column,action,id,rid1,rid2,rid3,rid4,element_id){if(($('select option[value="'+$('#'+element_id).val()+'"]:selected').length>1)&&$('select option[value="'+$('#'+element_id).val()+'"]:selected')!==""){if($('#'+element_id).val()!==""){$('#'+element_id).val('-1').change();$('#noDupeModal').modal('show')}}else{save_column(base_url,column,action,id,rid1,rid2,rid3,rid4,element_id)}if($('#'+element_id).val()===""){save_column(base_url,column,action,id,rid1,rid2,rid3,rid4,element_id)}};function select_place_multi(base_url,column,action,id,rid1,rid2,rid3,rid4,element_id){var user_value=$('#'+element_id).val();var select_class=rid1;var selected_values=[];$('.'+select_class).each(function(){var x=this.value;if(typeof x!=='undefined'){if(this.id!=element_id){selected_values.push(x)}}});$('.'+select_class).each(function(){x=this.value;if(typeof x!=='undefined'){if(($.inArray(x,selected_values)>-1)&&(x!="")){if(x==user_value){$('#noDupeModal').modal('show');$('#'+element_id).val('-1').change()}}else{save_column(base_url,column,action,id,rid1,rid2,rid3,rid4,element_id)}}})}function regenerate_judging_numbers(base_url,action,source,element_id){$("#"+element_id+"-status").attr("class","fa fa-lg fa-cog fa-spin text-muted");$("#"+element_id+"-status-msg").html("Processing...");$("#"+element_id+"-status-msg").attr("class","text-muted small");$("#"+element_id+"-status").show();$("#"+element_id+"-status-msg").show();var url=base_url+"ajax/regenerate.ajax.php?action="+action;jQuery.ajax({url:url,success:function(data){var jsonData=JSON.parse(data);if(jsonData.status==="0"){if(source=="admin-dashboard"){generic_failure(element_id,'8000','There was an error, please try again.')}}if(jsonData.status==="1"){if(source=="admin-dashboard"){generic_success(element_id,'8000','Regenerated successfully.')}}if(jsonData.status==="9"){if(source=="admin-dashboard"){generic_session_expired(element_id,'0','Session expired. Sign in and try again.')}}},error:function(){}})}function purge_data(base_url,action,go,source,element_id){$("#"+element_id+"-status").attr("class","fa fa-lg fa-cog fa-spin text-muted");$("#"+element_id+"-status-msg").html("Processing...");$("#"+element_id+"-status-msg").attr("class","text-muted small");$("#"+element_id+"-status").show();$("#"+element_id+"-status-msg").show();if(action==""){action="purge"}else{action=action}let url=base_url+"ajax/purge.ajax.php?action="+action+"&go="+go;let data_const="";if((go=="entries")||(go=="payments")||(go=="participants")){var value=$("#"+element_id+"-"+go+"-value").val();data_const+=value;url+="&view="+value}if((go=="judge-assignments")||(go=="steward-assignments")){url+="&view="+element_id}jQuery.ajax({url:url,data:data_const,type:"POST",success:function(data){var jsonData=JSON.parse(data);if(jsonData.status==="0"){if(source=="admin-dashboard"){generic_failure(element_id,'8000','There was an error, please try again.')}}if(jsonData.status==="1"){var message="";if((jsonData.date!=="")||(jsonData.date.length>1)){message="Data prior to "+jsonData.date+" purged successfully."}else if(go=="confirmed"){message="All entries confirmed."}else if(go=="cleanup"){message="Data cleaned successfully."}else{message="Purge completed successfully."}if(source=="table-admin"){$("#"+element_id+"-count").html("0");$("#"+element_id+"-icon").removeClass("fa fa-lg fa-edit");$("#"+element_id+"-icon").removeClass("fa fa-lg fa-plus-circle");$("#"+element_id+"-icon").addClass("fa fa-lg fa-plus-circle");generic_success(element_id,'8000','Deleted')}if(source=="admin-dashboard"){if((go=="participants")||(go=="purge-all")){var dom_ct_participants_calc=$("#admin-dashboard-participant-count").text()-jsonData.dom_ct_participants;$("#admin-dashboard-participant-count").html(dom_ct_participants_calc);$("#admin-dashboard-avail-judges-count").html(jsonData.dom_ct_judges_avail);$("#admin-dashboard-assigned-judges-count").html(jsonData.dom_ct_judges_assigned);$("#admin-dashboard-avail-stewards-count").html(jsonData.dom_ct_stewards_avail);$("#admin-dashboard-assigned-stewards-count").html(jsonData.dom_ct_stewards_assigned);$("#admin-dashboard-avail-staff-count").html(jsonData.dom_ct_staff_avail);$("#admin-dashboard-assigned-staff-count").html(jsonData.dom_ct_staff_assigned)}if((go=="participants")||(go=="entries")||(go=="purge-all")){$("#admin-dashboard-participant-entries").html(jsonData.dom_ct_participants_entries);$("#admin-dashboard-entries-count").html(jsonData.dom_ct_entries);$("#admin-dashboard-entries-unconfirmed-count").html(jsonData.dom_ct_entries_unconfirmed);$("#admin-dashboard-entries-paid-count").html(jsonData.dom_ct_entries_paid);$("#admin-dashboard-entries-paid-received-count").html(jsonData.dom_ct_entries_paid_received);$("#admin-dashboard-total-fees").html(jsonData.dom_total_fees);$("#admin-dashboard-total-fees-paid").html(jsonData.dom_total_fees_paid)}if(go=="evaluation"){$("#admin-dashboard-evaluation-count").html(jsonData.dom_ct_eval);$("#admin-dashboard-evaluation-count-total").html(jsonData.dom_ct_eval)}generic_success(element_id,'8000',message)}}if(jsonData.status==="2"){if((jsonData.date!=="")||(jsonData.date.length>1)){message="No records updated prior to "+jsonData.date+" were found."}else{message="No non-admin participants found."}if(source=="admin-dashboard"){generic_failure(element_id,'8000',message)}}if(jsonData.status==="9"){if(source=="admin-dashboard"){generic_session_expired(element_id,'0','Session expired. Sign in and try again.')}}},error:function(){}})}