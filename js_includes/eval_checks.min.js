function checkConsensus(data){var entered_consensus_score=$("#evalFinalScore").val();var disparity=0;data=Object.values(data);data.forEach(function(item,index){if((entered_consensus_score>0)&&(entered_consensus_score!==item)){disparity+=1}});if(disparity>0){$('#score-floor-modal').modal('hide');$('#score-ceiling-modal').modal('hide');$('#score-disparity-modal').modal('show');$("#consensus-status-icon").attr("class","fa fa-times-circle text-danger");$("#consensus-status-msg").html(consensus_caution_output)}else if((entered_consensus_score!=="")&&(entered_consensus_score<13)){$('#score-disparity-modal').modal('hide');$('#score-ceiling-modal').modal('hide');$('#score-floor-modal').modal('show')}else if((entered_consensus_score!=="")&&(entered_consensus_score>50)){$('#score-disparity-modal').modal('hide');$('#score-floor-modal').modal('hide');$('#score-ceiling-modal').modal('show')}else{$('#score-disparity-modal').modal('hide');$('#score-floor-modal').modal('hide');$('#score-ceiling-modal').modal('hide');$("#consensus-status-icon").attr("class","fa fa-check-circle text-success");$("#consensus-status-msg").html(consensus_match_output)}};function displayCalc(score){$("#scoring-guide-bottom-prob").attr("class","row");$("#scoring-guide-bottom-fair").attr("class","row");$("#scoring-guide-bottom-good").attr("class","row");$("#scoring-guide-bottom-v-good").attr("class","row");$("#scoring-guide-bottom-excellent").attr("class","row");$("#scoring-guide-bottom-outstanding").attr("class","row");if((score>0)&&(score<=13)){$("#scoring-guide").html(score_problematic);$("#scoring-guide-bottom-prob").attr("class","row scoring-guide-bottom-text bg-danger text-danger")}else if((score>13)&&(score<=20)){$("#scoring-guide").html(score_fair);$("#scoring-guide-bottom-fair").attr("class","row scoring-guide-bottom-text bg-warning text-warning")}else if((score>20)&&(score<=29)){$("#scoring-guide").html(score_good);$("#scoring-guide-bottom-good").attr("class","row scoring-guide-bottom-text bg-info text-info")}else if((score>29)&&(score<=37)){$("#scoring-guide").html(score_very_good);$("#scoring-guide-bottom-v-good").attr("class","row scoring-guide-bottom-text bg-primary")}else if((score>37)&&(score<=44)){$("#scoring-guide").html(score_excellent);$("#scoring-guide-bottom-excellent").attr("class","row scoring-guide-bottom-text bg-success text-success")}else if((score>44)&&(score<=50)){$("#scoring-guide").html(score_outstanding);$("#scoring-guide-bottom-outstanding").attr("class","row scoring-guide-bottom-text bg-success text-success")}};function calculateSum(method){var score=0;$(".score-choose").each(function(){if(!isNaN(this.value)&&this.value.length!=0){score+=parseFloat(this.value)}});if(method==0){$("#judge-score").html(score.toFixed(0));$("#evalFinalScore").attr("placeholder",score.toFixed(0));displayCalc(score);checkScoreRange(score,judgeScores,score_range,method)}};function checkScoreRange(score,data,score_range,method){var disparity=0;data.forEach(function(item,index){if(Math.abs(item-score)>score_range){disparity+=1}});if(disparity>0){if(method==0){$("#scoring-guide-status-icon").attr("class","fa fa-times-circle text-danger");$("#scoring-guide-status-msg").html(score_range_caution_output)}if(method==1){$('#score-disparity-judges-modal').modal('show')}}else{$("#scoring-guide-status-icon").attr("class","fa fa-check-circle text-success");$("#scoring-guide-status-msg").html(score_range_ok_output)}};function ordinalHelp(totalNum,positionNum){if((totalNum=="")&&(positionNum=="")){$("#ordinal-help-total").hide("fast");$("#ordinal-help-position").hide("fast");$("#evalPosition_0").prop("required",false);$("#evalPosition_1").prop("required",false)}else if((totalNum=="")&&(positionNum!="")){$("#ordinal-help-total").show("fast");$("#ordinal-help-position").hide("fast");$("#evalPosition_0").prop("required",true);$("#evalPosition_1").prop("required",true)}else if((totalNum!="")&&(positionNum=="")){$("#ordinal-help-total").hide("fast");$("#ordinal-help-position").show("fast");$("#evalPosition_0").prop("required",true);$("#evalPosition_1").prop("required",true)}else if((totalNum!="")&&(positionNum!="")){$("#ordinal-help-total").hide("fast");$("#ordinal-help-position").hide("fast");$("#evalPosition_0").prop("required",true);$("#evalPosition_1").prop("required",true)}else{$("#evalPosition_0").prop("required",true);$("#evalPosition_1").prop("required",true)}};$(document).ready(function(){$(".score-choose").change(function(){calculateSum(0)});$("#ordinal-help-position").hide();$("#ordinal-help-total").hide();$("#evalPosition_0").on("keyup",function(e){var value=$(this).val();var positionNum=$.trim(value);var totalNum=$("#evalPosition_1").val();ordinalHelp(totalNum,positionNum)});$("#evalPosition_1").on("keyup",function(e){var value=$(this).val();var totalNum=$.trim(value);var positionNum=$("#evalPosition_0").val();ordinalHelp(totalNum,positionNum)});$("#evalFinalScore").on("keyup",function(e){if(e.which!==32){var value=$(this).val();var noWhitespaceValue=value.replace(/\s+/g,'');var noWhitespaceCount=noWhitespaceValue.length;if(noWhitespaceCount%2===0){checkConsensus(consensusScores)}}})});