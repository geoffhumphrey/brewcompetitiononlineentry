var KEYCODE_ESC=27;$(document).keyup(function(e){if(e.which==KEYCODE_ESC){$('#loader-submit').stop()}});setTimeout(function(){$('.alert-stacked').css('opacity',1).slideUp('fast').animate({opacity:0},{queue:false,duration:'fast'}).removeClass('show')},15000);setTimeout(function(){$('#alert-auto-dismiss').fadeOut('fast');$('#alert-auto-dismiss').removeClass('show')},10000);$(function(){$('[data-toggle="tooltip"]').tooltip()});$(function(){$('[data-tooltip="true"]').tooltip()});$(function(){$('[data-toggle="popover"]').popover()});function jumpMenu(targ,selObj,restore){eval(targ+".location='"+selObj.options[selObj.selectedIndex].value+"'"),restore&&(selObj.selectedIndex=0)}function checkAvailability(){jQuery.ajax({url:username_url,data:'user_name='+$("#user_name").val(),type:"POST",success:function(data){$("#username-status").html(data)},error:function(){}})}function AjaxFunction(t){var e;try{e=new XMLHttpRequest()}catch(t){try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){return!1}}}var a=email_url;a=(a=a+"?email="+t)+"&sid="+Math.random(),e.onreadystatechange=function(){4==e.readyState&&(document.getElementById("msg_email").innerHTML=e.responseText)},e.open("GET",a,!0),e.send(null)}function EmailAjaxFunction(email){var httpxml;try{httpxml=new XMLHttpRequest()}catch(e){try{httpxml=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{httpxml=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){return false}}}function stateck(){if(httpxml.readyState==4){document.getElementById("msg_email").innerHTML=httpxml.responseText}}if(setup==1){email_url=email_url+"?section=setup&email="+email}else{email_url=email_url+"?email="+email}email_url=email_url+"&sid="+Math.random();httpxml.onreadystatechange=stateck;httpxml.open("GET",email_url,true);httpxml.send(null)}function formatTimeDisplay(seconds,display){if(display==""){var disp=0}else{var disp=display}var numseconds=parseInt((((seconds%31536000)%86400)%3600)%60,10);if(disp==0){var numhours=parseInt(Math.floor(((seconds%31536000)%86400)/3600),10);var numminutes=parseInt(Math.floor((((seconds%31536000)%86400)%3600)/60),10);var timer=((numhours<10)?"0"+numhours:numhours)+":"+((numminutes<10)?"0"+numminutes:numminutes)+":"+((numseconds<10)?"0"+numseconds:numseconds)}if(disp==1){var numminutes=parseInt(Math.floor((((seconds%31536000)%86400)%3600)/60),10);var timer=((numminutes<10)?"0"+numminutes:numminutes)+":"+((numseconds<10)?"0"+numseconds:numseconds)}if(disp==2){var timer=((numseconds<10)?"0"+numseconds:numseconds)}return timer}function fetchRecordCount(ajax_url,element,is_class,db_table,p1,c1,p2,c2,p3,c3){if(is_class==1){prefix="."}else{prefix="#"}element=prefix+element;element_updated=element+"-updated";console.log(element_updated);count_url=ajax_url+"count_records.ajax.php?section="+db_table;if((typeof p1!=='undefined')&&(typeof c1!=='undefined')){count_url=count_url+"&p1="+p1+"&c1="+c1}if((typeof p2!=='undefined')&&(typeof c2!=='undefined')){count_url=count_url+"&p2="+p2+"&c2="+c2}if((typeof p3!=='undefined')&&(typeof c3!=='undefined')){count_url=count_url+"&p3="+p3+"&c3="+c3}console.log(count_url);$.ajax({url:count_url,type:'GET',dataType:'json',success:function(response){if(response.success){$(element).html(response.count);$(element_updated).html(response.updated);console.log(response.updated)}else{$(element).text('Error');$(element_updated).text('Failed to fetch data: '+response.message)}},error:function(xhr,status,error){$(element).text('Error');$(element_updated).text('Connection failed: '+error)}})}function enable_planning_mode(ajax_url,admin_function){$.ajax({url:ajax_url+"tables_mode.ajax.php?section=enable-planning",type:'GET',dataType:'json',success:function(data){console.log("Planning mode enabled.");if(data.status==="1"){$("#competition-mode-status").hide();$("#competition-mode-status-icon").attr("class","small text-success");$("#competition-mode-status-icon").attr("class","fa fa-check-circle text-success");$("#competition-mode-status").show().delay(5000).hide("fast");if(admin_function=="judging_tables"){$("#competition-mode-status-text").html("Tables Planning Mode loaded successfully. Refreshing the page...");$('#loader-submit').show(0).delay(30000).hide(0);window.location.reload(true)}}else if(data.status==="2"){$("#competition-mode-status").hide();$("#competition-mode-status-text").html("Tables Planning Mode was not loaded successfully.");$("#competition-mode-status-icon").attr("class","small text-danger");$("#competition-mode-status-icon").attr("class","fa fa-exclamation-circle text-warning");$("#competition-mode-status").show().delay(5000).hide("fast")}else{$("#competition-mode-status").hide();$("#competition-mode-status-text").html("There was an error.");$("#competition-mode-status-icon").attr("class","small text-danger");$("#competition-mode-status-icon").attr("class","fa fa-exclamation-circle text-warning");$("#competition-mode-status").show().delay(5000).hide("fast")}},error:function(){console.log(ajax_url);console.log('Error')}})}function enable_competition_mode(ajax_url,admin_function){$.ajax({url:ajax_url+"tables_mode.ajax.php?section=enable-competition",type:'GET',dataType:'json',success:function(data){if(data.status==="1"){$("#planning-mode-status").hide();$("#planning-mode-status-icon").attr("class","small text-success");$("#planning-mode-status-icon").attr("class","fa fa-check-circle text-success");$("#planning-mode-status").show().delay(5000).hide("fast");if(admin_function=="judging_tables"){$("#planning-mode-status-text").html("Tables Competition Mode loaded successfully. Refreshing the page...");$('#loader-submit').show(0).delay(30000).hide(0);window.location.reload(true)}}else if(data.status==="2"){$("#planning-mode-status").hide();$("#planning-mode-status-text").html("Tables Competition Mode was not loaded successfully.");$("#planning-mode-status-icon").attr("class","small text-danger");$("#planning-mode-status-icon").attr("class","fa fa-exclamation-circle text-danger");$("#planning-mode-status").show().delay(5000).hide("fast")}else{$("#planning-mode-status").hide();$("#competition-mode-status-text").html("There was an error.");$("#planning-mode-status-icon").attr("class","small text-danger");$("#planning-mode-status-icon").attr("class","fa fa-exclamation-circle text-danger");$("#planning-mode-status").show().delay(5000).hide("fast")}},error:function(){console.log('Error')}})}$(document).ready(function(){$(document).on('scroll click blur change',function(){if($("#form-submit-button").is(":disabled")||$("#form-submit-button").hasClass("disabled")){$("#form-submit-button-disabled-msg-required").fadeIn()}else{$("#form-submit-button-disabled-msg-required").fadeOut()}});$("#submitBtn").click(function(){$("#archiveName").html($("#archiveSuffix").val())});$("#submit").click(function(){$("#formfield").submit()});$("#admin-arrow").click(function(){$(this).find("i").toggleClass("fa-chevron-circle-left fa-chevron-circle-right");$(this).find("i").toggleClass("text-teal text-orange")});$(".my-dropdown").dropdown();$(".my-dropdown").tooltip();$("a[data-confirm]").click(function(t){var e=$(this).attr("href");return $("#dataConfirmModal").length||$("body").append('<div class="modal fade" id="dataConfirmModal" aria-labelledby="dataConfirmLabel"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 id="dataConfirmLabel" class="modal-title">Please Confirm</h4></div><div class="modal-body"></div><div class="modal-footer"><button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button><a class="btn btn-success" id="dataConfirmOK">Yes</a></div></div></div></div>'),$("#dataConfirmModal").find(".modal-body").text($(this).attr("data-confirm")),$("#dataConfirmOK").attr("href",e),$("#dataConfirmModal").modal({show:!0}),!1});$("a:not([href*='#'],[target='_blank'])").click(function(){if(!$(this).hasClass("hide-loader")){$('#loader-submit').show(0).delay(30000).hide(0)}else{$('#loader-submit').hide()}});$("form").submit(function(){if(!$(this).hasClass("hide-loader-form-submit")){$('#loader-submit').show(0).delay(30000).hide(0)}else{$('#loader-submit').hide()}});$("#form-submit-button-disabled-msg-required").hide();$("#form-submit-button").click(function(){if($(this).is(":disabled")||$(this).hasClass("disabled")){$("#submit-form").removeClass("hide-loader-form-submit");$("#submit-form").addClass("hide-loader-form-submit");$("#form-submit-button-disabled-msg-required").fadeIn()}else{$("#submit-form").removeClass("hide-loader-form-submit");$("#form-submit-button-disabled-msg-required").fadeOut()}});$(".hide-loader").click(function(){$('#loader-submit').hide()});$(".modal-window-link").click(function(){$('#loader-submit').hide()});$(".modal-window-link").fancybox({toolbar:false,smallBtn:true,buttons:["close"],iframe:{css:{height:'600px'},attr:{scrolling:"auto"},preload:true}});$('[data-fancybox="gallery"]').fancybox({buttons:["slideShow","thumbs","zoom","fullScreen","share","close"],loop:true,protect:true});$(function(){$('.date-time-picker-system').datetimepicker({format:'YYYY-MM-DD hh:mm A'})});if((section=="admin")&&(go=="styles")){$("#mead-cider").hide("fast");$("#mead").hide("fast");$("#brewStyleEntry").hide("fast");$("#brewStyleEntryTextArea").prop("required",false);$("input[name='brewStyleCarb']").prop("required",false);$("input[name='brewStyleSweet']").prop("required",false);$("input[name='brewStyleStrength']").prop("required",false);if(edit_style=="edit"){if(req_special==1){$("#brewStyleEntry").show("fast");$("textarea[name='brewStyleEntry']").prop("required",true)}if(style_type==2){$("#mead-cider").show("fast");$("input[name='brewStyleCarb']").prop("required",true);$("input[name='brewStyleSweet']").prop("required",true)}if(style_type==3){$("#mead-cider").show("fast");$("#mead").show("fast");$("input[name='brewStyleCarb']").prop("required",true);$("input[name='brewStyleSweet']").prop("required",true);$("input[name='brewStyleStrength']").prop("required",true)}}$("#brewStyleType").change(function(){$("#mead-cider").hide("fast");$("#mead").hide("fast");$("input[name='brewStyleStrength']").removeAttr("checked");$("#brewStyleStrength_1").prop("checked",true);$("input[name='brewStyleSweet']").removeAttr("checked");$("#brewStyleSweet_1").prop("checked",true);$("input[name='brewStyleCarb']").removeAttr("checked");$("#brewStyleCarb_1").prop("checked",true);$("input[name='brewStyleReqSpec']").removeAttr("checked");$("#brewStyleReqSpec_1").prop("checked",true);$("#brewStyleEntry").hide("fast");$("#brewStyleEntryTextArea").val("");if($("#brewStyleType").val()=="3"){$("#mead-cider").show("fast");$("#mead").show("fast");$("input[name='brewStyleCarb']").prop("required",true);$("input[name='brewStyleSweet']").prop("required",true);$("input[name='brewStyleStrength']").prop("required",true)}else if($("#brewStyleType").val()=="2"){$("#mead").hide("fast");$("#mead-cider").show("fast");$("input[name='brewStyleCarb']").prop("required",true);$("input[name='brewStyleSweet']").prop("required",true)}});$('input[name=brewStyleReqSpec]').click(function(){if($(this).attr('id')=='brewStyleReqSpec_0'){$("#brewStyleEntry").show("fast");$("#brewStyleEntryTextArea").prop("required",true)}else{$("#brewStyleEntry").hide("fast");$("#brewStyleEntryTextArea").prop("required",false);$("#brewStyleEntryTextArea").val("")}})}if((section=="brewer")||(section=="admin")||(section=="step2")){$("#brewerClubsOther").hide();$("#ahaProAmText").hide();$("#us-state").hide();$("#aus-state").hide();$("#ca-state").hide();$("#proAm").hide();$("#judge-waiver").hide();$("#bjcp-id").hide();$("#brewerJudgeFields").hide();$("#brewerStewardFields").hide();$("#brewerStaffFields").hide();$("#participant-orgs").hide();$("#security-question-change").hide();if((action=="edit")&&(brewer_country=="United States")&&(section=="brewer")){$("#proAm").show();$("#ahaProAmText").show();$("#us-state").show();$("#aus-state").hide();$("#ca-state").hide();$("#non-us-state").hide()}if((action=="edit")&&(brewer_country=="United States")&&(section=="admin")){$("#proAm").show();$("#us-state").show();$("#aus-state").hide();$("#ca-state").hide();$("#non-us-state").hide()}if((action=="edit")&&(brewer_country=="Australia")){$("#proAm").hide();$("#ahaProAmText").hide();$("#aus-state").show();$("#us-state").hide();$("#ca-state").hide();$("#non-us-state").hide()}if((action=="edit")&&(brewer_country=="Canada")){$("#proAm").hide();$("#ahaProAmText").hide();$("#aus-state").hide();$("#us-state").hide();$("#ca-state").show();$("#non-us-state").hide()}$("#brewerCountry").change(function(){$("#brewerStateNon").val("");$("#brewerStateUS").val("");$("#brewerStateAUS").val("");$("#brewerStateCA").val("");$("#brewerStateUS option:selected").prop("selected",false);$("#brewerStateAUS option:selected").prop("selected",false);$("#brewerStateCA option:selected").prop("selected",false);$("#non-us-state").hide();$("#us-state").hide();$("#aus-state").hide();$("#ca-state").hide();$("#proAm").hide();$("#ahaProAmText").hide();if($("#brewerCountry").val()=="United States"){$("#proAm").show("slow");$("#ahaProAmText").show("slow");$("#us-state").show()}else if($("#brewerCountry").val()=="Australia"){$("#aus-state").show()}else if($("#brewerCountry").val()=="Canada"){$("#ca-state").show()}else{$("#non-us-state").show();$("#brewerProAm_0").prop("checked",true);$("#brewerProAm_1").prop("checked",false);$("#brewerProAm_2").prop("checked",false)}});if((action=="edit")&&(club_other)){$("#brewerClubsOther").show("slow");$("#clubOther").show("slow")}$("#brewerClubs").change(function(){$("#brewerClubsOther").hide();$("#clubOther").hide();$("#clubOther-warning").hide();if($("#brewerClubs").val()=="Other"){$("#brewerClubsOther").show("slow");$("#clubOther").show("slow")}});if((action=="edit")&&((brewer_judge=="Y")||(brewer_steward=="Y"))){$("#participant-orgs").show()}if((action=="edit")&&(brewer_judge=="Y")){$("#brewerJudgeFields").show();$("#judge-steward-notes").show();$("#judge-waiver").show();$("#bjcp-id").show()}else{$("#brewerJudgeFields").hide();$("#judge-steward-notes").hide();$("#judge-waiver").hide();$("#bjcp-id").hide()}if((action=="edit")&&(brewer_steward=="Y")){$("#brewerStewardFields").show();$("#judge-steward-notes").show();$("#judge-waiver").show();$("#bjcp-id").show()}else{$("#brewerStewardFields").hide();$("#judge-steward-notes").hide();if(brewer_judge=="N"){$("#judge-waiver").hide();$("#bjcp-id").hide()}}if((action=="edit")&&(brewer_staff=="Y")){$("#brewerStaffFields").show();$("#judge-steward-notes").show()}$("#brewery-prod-label-icon").hide();$('input[type="radio"]').click(function(){if($(this).attr('id')=='brewerBreweryProd_0'){if((action=="add")||(section=="register")||(!brewer_brewery_prod)){$("#brewery-prod-label-icon").show()}if((action=="add")||(section=="register")||(!brewer_brewery_prod)){$("#brewery-prod-label").addClass("text-warning")}$("input[name='brewerBreweryProdMeas']").prop("required",true)}if($(this).attr('id')=='brewerBreweryProd_1'){if((action=="add")||(section=="register")||(!brewer_brewery_prod)){$("#brewery-prod-label-icon").show()}if((action=="add")||(section=="register")||(!brewer_brewery_prod)){$("#brewery-prod-label").addClass("text-warning")}$("input[name='brewerBreweryProdMeas']").prop("required",true)}if($(this).attr('id')=='brewerBreweryProd_2'){if((action=="add")||(section=="register")||(!brewer_brewery_prod)){$("#brewery-prod-label-icon").show()}if((action=="add")||(section=="register")||(!brewer_brewery_prod)){$("#brewery-prod-label").addClass("text-warning")}$("input[name='brewerBreweryProdMeas']").prop("required",true)}if($(this).attr('id')=='brewerBreweryProd_3'){if((action=="add")||(section=="register")||(!brewer_brewery_prod)){$("#brewery-prod-label-icon").show()}if((action=="add")||(section=="register")||(!brewer_brewery_prod)){$("#brewery-prod-label").addClass("text-warning")}$("input[name='brewerBreweryProdMeas']").prop("required",true)}if($(this).attr('id')=='brewerBreweryProd_4'){if((action=="add")||(section=="register")||(!brewer_brewery_prod)){$("#brewery-prod-label-icon").show()}if((action=="add")||(section=="register")||(!brewer_brewery_prod)){$("#brewery-prod-label").addClass("text-warning")}$("input[name='brewerBreweryProdMeas']").prop("required",true)}if($(this).attr('id')=='brewerBreweryProdMeas_0'){if((action=="add")||(section=="register")||(!brewer_brewery_prod)){$("#brewery-prod-label-icon").show()}if((action=="add")||(section=="register")||(!brewer_brewery_prod)){$("#brewery-prod-label").addClass("text-warning")}$("input[name='brewerBreweryProd']").prop("required",true)}if($(this).attr('id')=='brewerBreweryProdMeas_1'){if((action=="add")||(section=="register")||(!brewer_brewery_prod)){$("#brewery-prod-label-icon").show()}if((action=="add")||(section=="register")||(!brewer_brewery_prod)){$("#brewery-prod-label").addClass("text-warning")}$("input[name='brewerBreweryProd']").prop("required",true)}if($(this).attr('id')=='brewerSteward_0'){$("#brewerStewardFields").show("slow");$("#participant-orgs").show("slow");$("#judge-steward-notes").show("slow");$("#judge-waiver").show("slow");$("#bjcp-id").show("slow")}if($(this).attr('id')=='brewerJudge_0'){$("#brewerJudgeFields").show("slow");$("#participant-orgs").show("slow");$("#judge-steward-notes").show("slow");$("#judge-waiver").show("slow");$("#bjcp-id").show("slow")}if($(this).attr('id')=='brewerSteward_1'){$("#brewerStewardFields").hide("slow");if($('#brewerSteward_1').prop('checked')){$("#judge-waiver").hide("slow");$("#bjcp-id").hide("slow")}if(($('#brewerStaff_1').prop('checked'))&&($('#brewerJudge_1').prop('checked'))){$("#judge-steward-notes").hide("slow")}if(($('#brewerSteward_1').prop('checked'))&&($('#brewerJudge_1').prop('checked'))){$("#participant-orgs").hide("slow")}if($('#brewerJudge_0').prop('checked')){$("#participant-orgs").show()}}if($(this).attr('id')=='brewerJudge_1'){$("#brewerJudgeFields").hide("slow");if($('#brewerJudge_1').prop('checked')){$("#judge-waiver").hide("slow");$("#bjcp-id").hide("slow")}if(($('#brewerStaff_1').prop('checked'))&&($('#brewerSteward_1').prop('checked'))){$("#judge-steward-notes").hide("slow")}if(($('#brewerSteward_1').prop('checked'))&&($('#brewerJudge_1').prop('checked'))){$("#participant-orgs").hide("slow")}if($('#brewerSteward_0').prop('checked')){$("#participant-orgs").show()}}if($(this).attr('id')=='brewerStaff_0'){$("#brewerStaffFields").show("slow");$("#judge-steward-notes").show("slow");$("#staff-help").show("slow")}if($(this).attr('id')=='brewerStaff_1'){$("#brewerStaffFields").hide("slow");if(($('#brewerJudge_1').prop('checked'))&&($('#brewerSteward_1').prop('checked'))){$("#judge-steward-notes").hide("slow");$("#staff-help").hide("slow")}}if($(this).attr('id')=='change-security-0'){$("#security-question-change").hide("slow");$("input[name='userQuestionAnswer']").prop("required",false);$("#userQuestionAnswer").val(user_question_answer)}if($(this).attr('id')=='change-security-1'){$("#security-question-change").show("slow");$("input[name='userQuestionAnswer']").prop("required",true);$("#userQuestionAnswer").val('')}})}});